var fs = require('fs'),
	path = require('path');
	
var join = path.join;

var fileLoader = function(filePath) {
	var modules = {};
	fs.readdirSync(filePath).forEach(function(file) {
		if(fs.lstatSync(join(filePath,file)).isDirectory()) {
			modules[file] = {};
			modules[file] = fileLoader(join(filePath,file));
		} else {
			var fileName = path.basename(file, '.js');
			modules[fileName] = {};
			modules[fileName] = require(join(filePath,file));
		}
	});
	return modules
}

module.exports = fileLoader;